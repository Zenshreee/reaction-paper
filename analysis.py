import pandas as pd
import matplotlib.pyplot as plt
from io import StringIO

data_str = """

0.1, 0.610781633198772, 2812
0.2, 0.31461299781498303, 2812
0.3, 0.2161045729689546, 2812
0.4, 0.16422813659175406, 2812
0.5, 0.1371695388661359, 2812
0.6, 0.12104036153960863, 2812
0.7, 0.10208424519576227, 2812
0.8, 0.09046725841674913, 2812
0.9, 0.08359153177695314, 2812
1.0, 0.07472668468210691, 2812

0.1, 0.5734695874070008, 5625
0.2, 0.3087748037096282, 5625
0.3, 0.20772749966235304, 5625
0.4, 0.16388684374807175, 5625
0.5, 0.13494446960017226, 5625
0.6, 0.11655117438278767, 5625
0.7, 0.10200018714392606, 5625
0.8, 0.09174800310685871, 5625
0.9, 0.08282417506655719, 5625
1.0, 0.07437128904911047, 5625

0.1, 0.562162124962149, 11250
0.2, 0.31000981582648074, 11250
0.3, 0.21090273216321476, 11250
0.4, 0.16659670193751144, 11250
0.5, 0.13218245890001093, 11250
0.6, 0.1159042963519175, 11250
0.7, 0.10239801262305859, 11250
0.8, 0.09320074080039172, 11250
0.9, 0.08271984108218297, 11250
1.0, 0.07514215316260203, 11250

0.1, 0.6793246198344968, 15000
0.2, 0.36956956534984003, 15000
0.3, 0.2677964605871054, 15000
0.4, 0.19487769863633883, 15000
0.5, 0.16365339259431302, 15000
0.6, 0.14217301376548613, 15000
0.7, 0.1236241532783435, 15000
0.8, 0.10907524024227289, 15000
0.9, 0.10269751180748739, 15000
1.0, 0.08887825340342637, 15000

0.1, 0.7361341708078606, 16875
0.2, 0.3823879017260241, 16875
0.3, 0.26835922580769234, 16875
0.4, 0.19641484117483765, 16875
0.5, 0.1683840005980512, 16875
0.6, 0.1411348781412259, 16875
0.7, 0.12354532683362585, 16875
0.8, 0.10747411180873652, 16875
0.9, 0.09935848734281881, 16875
1.0, 0.09181246666941256, 16875

0.1, 0.7199940222964359, 18750
0.2, 0.3762565816037435, 18750
0.3, 0.2521646923467302, 18750
0.4, 0.19638995725305763, 18750
0.5, 0.1620197096890499, 18750
0.6, 0.14865056689900508, 18750
0.7, 0.12531343611521306, 18750
0.8, 0.11180702797267239, 18750
0.9, 0.09785531228278134, 18750
1.0, 0.09120498306300617, 18750

0.1, 0.7101372455629728, 22500
0.2, 0.38693824778891617, 22500
0.3, 0.25908237489594493, 22500
0.4, 0.196434605131435, 22500
0.5, 0.16846181745237304, 22500
0.6, 0.1396638699469798, 22500
0.7, 0.12310525719822005, 22500
0.8, 0.10919000368917654, 22500
0.9, 0.10110321853180189, 22500
1.0, 0.08865105345634566, 22500
"""

data = pd.read_csv(StringIO(data_str), header=None, names=['Probability', 'ProfitRatio', 'BatteryBudget'])

def plot_data(df, title):
    n = 150
    unique_battery_budgets = df['BatteryBudget'].unique()
    for budget in unique_battery_budgets:
        subset = df[df['BatteryBudget'] == budget]
        
        # Labeling b in terms of n
        label = None
        if budget == 2812:
            label = 'n * n / 8'
        elif budget == 5625:
            label = 'n * n / 4'
        elif budget == 11250:
            label = 'n * n / 2'
        elif budget == 15000:
            label = '2 * n * n / 3'
        elif budget == 16875:
            label = '3 * n * n / 4'
        elif budget == 18750:
            label = '5 * n * n / 6'
        elif budget == 22500:
            label = 'n * n'
        
        plt.plot(subset['Probability'], subset['ProfitRatio'], label=label)
    
    plt.title('22500 people & 1 drone per 20 people with varying battery budgets')
    # create a subtitle
    plt.suptitle('Profit Ratio vs Probability')
    plt.xlabel('Probability (p)')
    plt.ylabel('Profit Ratio')
    plt.legend()
    plt.show()

# For m = n * n / 20, filter data for the particular setting
filtered_data1 = data[data['BatteryBudget'].isin([2812, 5625, 11250, 15000, 16875, 18750, 22500])]
plot_data(filtered_data1, 'm = n * n / 20')